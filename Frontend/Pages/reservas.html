<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Reservas | Ruta Turística Caño Salao | Proyecto Factible</title>
    <meta name="description" content="Reserva tu tour en Caño Salao. Tours por manglares, avistamiento de aves, experiencias pesqueras y más. Sistema de reservas en línea para nuestro proyecto factible">
    <meta name="keywords" content="reservas Caño Salao, tours manglares Venezuela, reservar tour ecoturismo, proyecto factible, sistema de reservas, turismo sostenible">
    <meta name="author" content="Estudiantes: Alejandra Paricaguan, Luis Nucete, Ricardo Farías | Tutora: Dulce Paraguan">
    
    <!-- FAVICON -->
    <link rel="icon" type="image/png" sizes="32x32" href="../media/Logo_cano_60.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../media/Logo_cano_60.png">
    <link rel="apple-touch-icon" href="../media/Logo_cano_120.png">
    <meta name="theme-color" content="#0d3b66">
    
    <!-- Preload de fuentes críticas -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Times+New+Roman:ital,wght@0,400;0,700;1,400&display=swap" as="style">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Times+New+Roman:ital,wght@0,400;0,700;1,400&display=swap">
    
    <!-- Cargar CSS principal -->
    <link rel="stylesheet" href="../index.css">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <!-- Flatpickr para selección de fechas -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    
    <style>
        /* ========== ESTILOS ESPECÍFICOS PARA RESERVAS ========== */
        /* Estos estilos complementan index.css */
        
        /* Hero Section para Reservas */
        .page-hero {
            min-height: 50vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            padding: 4rem 0;
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, var(--color-primary) 0%, #1a5276 100%);
        }
        
        .page-hero h1 {
            font-size: 3rem;
            margin-bottom: 1.5rem;
            color: white;
        }
        
        .hero-subtitle {
            font-size: 1.3rem;
            max-width: 800px;
            margin: 0 auto 2.5rem;
            opacity: 0.9;
            line-height: 1.5;
            font-weight: 400;
        }
        
        /* Breadcrumb */
        .breadcrumb {
            background: var(--color-light);
            padding: 1rem 0;
            font-size: 0.9rem;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .breadcrumb a {
            color: var(--color-primary);
            text-decoration: none;
            transition: var(--transition-fast);
        }
        
        .breadcrumb a:hover {
            color: var(--color-accent);
        }
        
        .breadcrumb span {
            color: var(--color-dark);
            font-weight: 500;
        }
        
        .breadcrumb .bi {
            margin: 0 0.5rem;
            opacity: 0.6;
            font-size: 0.8rem;
        }
        
        /* ========== ESTRUCTURA DE RESERVAS ========== */
        .reservas-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
            padding: 3rem 0;
        }
        
        @media (min-width: 992px) {
            .reservas-container {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        /* ========== SECCIÓN TOURS (IZQUIERDA) ========== */
        .tours-section {
            background: white;
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-lg);
            height: fit-content;
        }
        
        .tours-section h2 {
            color: var(--color-primary);
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--color-light);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.8rem;
        }
        
        .tour-filter {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            padding: 0.5rem 1rem;
            background: var(--color-light);
            border: 1px solid #dee2e6;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            color: var(--color-dark);
        }
        
        .filter-btn:hover,
        .filter-btn.active {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }
        
        .tour-cards {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            max-height: 600px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .tour-card {
            background: var(--color-light);
            border-radius: var(--radius-md);
            padding: 1.5rem;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }
        
        .tour-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
            border-color: var(--color-accent);
        }
        
        .tour-card.selected {
            border-color: var(--color-primary);
            background: linear-gradient(135deg, rgba(13, 59, 102, 0.05), rgba(230, 43, 126, 0.05));
        }
        
        .tour-badge {
            position: absolute;
            top: -10px;
            right: 1rem;
            background: var(--color-accent);
            color: white;
            padding: 0.3rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .tour-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }
        
        .tour-title {
            color: var(--color-primary);
            font-size: 1.3rem;
            font-weight: 700;
            margin: 0;
            flex: 1;
        }
        
        .tour-price {
            background: var(--color-accent);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: var(--radius-md);
            font-weight: 700;
            font-size: 1.2rem;
        }
        
        .tour-desc {
            color: #666;
            margin-bottom: 1rem;
            line-height: 1.6;
        }
        
        .tour-details {
            display: flex;
            flex-wrap: wrap;
            gap: 0.8rem;
            margin-top: 1rem;
            font-size: 0.9rem;
        }
        
        .tour-detail {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #666;
            background: white;
            padding: 0.5rem 0.8rem;
            border-radius: var(--radius-sm);
            border: 1px solid #e9ecef;
        }
        
        .tour-detail i {
            color: var(--color-primary);
        }
        
        /* ========== SECCIÓN FORMULARIO (DERECHA) ========== */
        .reserva-form-section {
            background: white;
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-lg);
        }
        
        .reserva-form-section h2 {
            color: var(--color-primary);
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--color-light);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.8rem;
        }
        
        .selected-tour-info {
            background: linear-gradient(135deg, var(--color-primary), #1a5276);
            color: white;
            padding: 1.5rem;
            border-radius: var(--radius-md);
            margin-bottom: 2rem;
        }
        
        .selected-tour-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .selected-tour-title {
            font-size: 1.4rem;
            font-weight: 700;
            margin: 0;
        }
        
        .selected-tour-price {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--color-accent);
        }
        
        .tour-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }
        
        .tour-tag {
            background: rgba(255,255,255,0.2);
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.85rem;
        }
        
        /* ========== FORMULARIO DE RESERVA ========== */
        .reserva-form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .form-section {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: var(--radius-md);
            border: 1px solid #e9ecef;
        }
        
        .form-section-title {
            color: var(--color-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.1rem;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--color-primary);
        }
        
        .form-group label.required:after {
            content: "*";
            color: #dc3545;
            margin-left: 0.2rem;
        }
        
        .form-control {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 2px solid #dee2e6;
            border-radius: var(--radius-md);
            font-family: inherit;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(13, 59, 102, 0.1);
        }
        
        .error-message {
            color: #dc3545;
            font-size: 0.85rem;
            margin-top: 0.3rem;
            display: none;
        }
        
        .error-message.show {
            display: block;
        }
        
        /* ========== MÉTODOS DE PAGO ========== */
        .pago-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .pago-method {
            border: 2px solid #dee2e6;
            border-radius: var(--radius-md);
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            background: white;
        }
        
        .pago-method:hover {
            border-color: var(--color-primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .pago-method.selected {
            border-color: var(--color-primary);
            background: rgba(13, 59, 102, 0.05);
        }
        
        .pago-icon {
            font-size: 2.5rem;
            color: var(--color-primary);
            margin-bottom: 0.5rem;
        }
        
        .pago-name {
            font-weight: 600;
            color: var(--color-dark);
            margin-bottom: 0.3rem;
        }
        
        .pago-desc {
            font-size: 0.85rem;
            color: #666;
        }
        
        /* Formularios de pago específicos */
        .pago-form {
            display: none;
            background: white;
            padding: 1.5rem;
            border-radius: var(--radius-md);
            border: 1px solid #e9ecef;
            margin-top: 1.5rem;
        }
        
        .pago-form.active {
            display: block;
        }
        
        .pago-form-title {
            color: var(--color-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .qr-container {
            text-align: center;
            padding: 1.5rem;
            background: white;
            border-radius: var(--radius-md);
            border: 2px dashed #dee2e6;
            margin: 1rem 0;
        }
        
        .qr-code {
            width: 150px;
            height: 150px;
            background: #f8f9fa;
            margin: 0 auto 1rem;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: #666;
        }
        
        .banco-info {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: var(--radius-md);
            margin-bottom: 1rem;
            border-left: 4px solid var(--color-primary);
        }
        
        .banco-info h5 {
            color: var(--color-primary);
            margin-bottom: 0.5rem;
        }
        
        /* RESUMEN DE PAGO */
        .resumen-pago {
            background: #f8f9fa;
            border-radius: var(--radius-md);
            padding: 1.5rem;
            border: 2px solid #e9ecef;
            margin-top: 1rem;
        }
        
        .resumen-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #e9ecef;
        }
        
        .resumen-title {
            color: var(--color-primary);
            font-weight: 700;
            font-size: 1.2rem;
        }
        
        .resumen-items {
            margin-bottom: 1rem;
        }
        
        .resumen-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.8rem;
            padding-bottom: 0.8rem;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .resumen-label {
            color: #666;
        }
        
        .resumen-value {
            font-weight: 600;
            color: var(--color-dark);
        }
        
        .resumen-total {
            display: flex;
            justify-content: space-between;
            font-weight: 800;
            font-size: 1.3rem;
            color: var(--color-primary);
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 2px solid #e9ecef;
        }
        
        .contribution-badge {
            background: var(--color-accent);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            display: inline-block;
            margin-top: 0.5rem;
        }
        
        /* TÉRMINOS Y CONDICIONES */
        .terms-container {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: var(--radius-md);
            border: 1px solid #e9ecef;
        }
        
        .terms-checkbox {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }
        
        .terms-checkbox input {
            margin-top: 0.3rem;
        }
        
        .terms-text {
            font-size: 0.9rem;
            color: #666;
            line-height: 1.5;
        }
        
        .terms-link {
            color: var(--color-primary);
            text-decoration: none;
            font-weight: 600;
        }
        
        .terms-link:hover {
            text-decoration: underline;
        }
        
        /* BOTÓN DE RESERVA */
        .btn-reservar {
            background: var(--color-accent);
            color: white;
            padding: 1rem 2rem;
            border-radius: var(--radius-md);
            border: none;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            width: 100%;
        }
        
        .btn-reservar:hover {
            background: #d81b60;
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        /* MENSAJE DE ÉXITO */
        .reserva-success {
            display: none;
            text-align: center;
            padding: 3rem;
            background: #d4edda;
            border-radius: var(--radius-lg);
            color: #155724;
            margin-top: 2rem;
        }
        
        .reserva-success.show {
            display: block;
        }
        
        .success-icon {
            font-size: 4rem;
            color: #28a745;
            margin-bottom: 1.5rem;
        }
        
        .reserva-details {
            background: white;
            padding: 2rem;
            border-radius: var(--radius-md);
            margin: 2rem 0;
            text-align: left;
            border: 1px solid #c3e6cb;
        }
        
        .reserva-id {
            background: var(--color-primary);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            font-weight: 700;
            font-size: 1.1rem;
            display: inline-block;
            margin-top: 1rem;
        }
        
        /* BANNER STICKY */
        .sticky-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 1rem;
            border-top: 3px solid var(--color-primary);
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
            z-index: 1000;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }
        
        .sticky-banner.show {
            transform: translateY(0);
        }
        
        .sticky-banner-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 2rem;
        }
        
        .sticky-tour-info {
            flex: 1;
        }
        
        .sticky-tour-name {
            font-weight: 700;
            color: var(--color-primary);
            font-size: 1.1rem;
        }
        
        .sticky-tour-price {
            font-weight: 800;
            color: var(--color-accent);
            font-size: 1.3rem;
        }
        
        /* RESPONSIVE */
        @media (max-width: 768px) {
            .page-hero h1 {
                font-size: 2.2rem;
            }
            
            .hero-subtitle {
                font-size: 1.1rem;
            }
            
            .reservas-container {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .tour-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
            
            .tour-price {
                align-self: flex-start;
            }
            
            .pago-methods {
                grid-template-columns: 1fr;
            }
            
            .sticky-banner-content {
                flex-direction: column;
                text-align: center;
                gap: 1rem;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* LOADING SPINNER */
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--color-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <img 
                        src="../media/Logo_cano_60.png" 
                        alt="Logo Caño Salao" 
                        class="logo-img"
                        width="35" 
                        height="35"
                    >
                    <h1 class="times-font">Caño <span class="text-orange">Salao</span></h1>
                </div>

                <div class="nav-center">
                    <nav>
                        <ul id="main-navigation">
                            <li><a href="../index.html"><i class="bi bi-house"></i> <span>Inicio</span></a></li>
                            <li><a href="Empresa.html"><i class="bi bi-building"></i> <span>Empresa</span></a></li>
                            <li><a href="Historia.html"><i class="bi bi-journal-text"></i> <span>Historia</span></a></li>
                            <li><a href="Servicios.html"><i class="bi bi-list-check"></i> <span>Servicios</span></a></li>
                            <li><a href="Atracciones.html"><i class="bi bi-star"></i> <span>Atracciones</span></a></li>
                            <li><a href="Contacto.html"><i class="bi bi-telephone"></i> <span>Contacto</span></a></li>
                            <li><a href="reservas.html" class="active"><i class="bi bi-calendar-check"></i> <span>Reservas</span></a></li>
                        </ul>
                    </nav>
                </div>

                <div class="auth-section">
                    <a href="login.html" class="login-btn">
                        <i class="bi bi-person-circle"></i> <span class="login-text">Iniciar Sesión</span>
                    </a>
                </div>

                <button class="menu-toggle" id="mobile-menu-toggle">
                    <i class="bi bi-list"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Menú móvil -->
    <div class="mobile-menu-overlay" id="mobile-menu-overlay"></div>
    <div class="mobile-menu-container" id="mobile-menu-container">
        <div class="mobile-menu-header">
            <div class="logo">
                <img src="../media/Logo_cano_60.png" alt="Logo Caño Salao" class="logo-img">
                <h2 class="times-font">Caño <span class="text-orange">Salao</span></h2>
            </div>
            <button class="mobile-menu-close" id="mobile-menu-close">
                <i class="bi bi-x-lg"></i>
            </button>
        </div>
        <nav class="mobile-menu-nav">
            <ul>
                <li><a href="../index.html"><i class="bi bi-house"></i> Inicio</a></li>
                <li><a href="Empresa.html"><i class="bi bi-building"></i> Empresa</a></li>
                <li><a href="Historia.html"><i class="bi bi-journal-text"></i> Historia</a></li>
                <li><a href="Servicios.html"><i class="bi bi-list-check"></i> Servicios</a></li>
                <li><a href="Atracciones.html"><i class="bi bi-star"></i> Atracciones</a></li>
                <li><a href="Contacto.html"><i class="bi bi-telephone"></i> Contacto</a></li>
                <li><a href="reservas.html" class="active"><i class="bi bi-calendar-check"></i> Reservas</a></li>
            </ul>
        </nav>
    </div>

    <!-- Hero Section -->
    <section class="page-hero">
        <div class="container">
            <h1 class="times-font">Reservas en Línea</h1>
            <p class="times-font hero-subtitle">
                Reserva tu experiencia en Caño Salao de forma rápida y segura. Nuestro sistema de reservas forma parte del proyecto factible de desarrollo turístico sostenible.
            </p>
        </div>
    </section>

    <!-- Breadcrumb -->
    <section class="breadcrumb">
        <div class="container">
            <a href="../index.html"><i class="bi bi-house"></i> Inicio</a> 
            <i class="bi bi-chevron-right"></i> 
            <a href="Servicios.html">Servicios</a>
            <i class="bi bi-chevron-right"></i> 
            <span>Reservas</span>
        </div>
    </section>

    <!-- Main Content -->
    <div class="container">
        <div class="reservas-container">
            <!-- Sección de Tours (Izquierda) -->
            <section class="tours-section">
                <h2><i class="bi bi-compass"></i> Tours Disponibles</h2>
                <p style="color: #666; margin-bottom: 1.5rem;">Selecciona el tour que deseas reservar. Todos incluyen guía local, equipo de seguridad y contribución al fondo comunitario.</p>
                
                <div class="tour-filter">
                    <button class="filter-btn active" data-filter="all">Todos</button>
                    <button class="filter-btn" data-filter="popular">Más Populares</button>
                    <button class="filter-btn" data-filter="budget">Económicos</button>
                    <button class="filter-btn" data-filter="premium">Premium</button>
                </div>
                
                <div id="tours-container" class="tour-cards">
                    <!-- Tours se cargarán aquí -->
                    <div class="loading-tours">
                        <div class="loading-spinner"></div>
                        <p>Cargando tours disponibles...</p>
                    </div>
                </div>
            </section>

            <!-- Sección de Formulario (Derecha) -->
            <section class="reserva-form-section">
                <h2><i class="bi bi-calendar-plus"></i> Completa tu Reserva</h2>
                
                <!-- Información del Tour Seleccionado -->
                <div id="selected-tour-info" class="selected-tour-info" style="display: none;">
                    <div class="selected-tour-header">
                        <h3 class="selected-tour-title" id="selected-tour-name">Tour Básico por los Manglares</h3>
                        <div class="selected-tour-price" id="selected-tour-price">$25.00</div>
                    </div>
                    <p id="selected-tour-description">Recorrido introductorio perfecto para conocer Caño Salao y sus manglares.</p>
                    <div class="tour-tags">
                        <span class="tour-tag"><i class="bi bi-clock"></i> 2 horas</span>
                        <span class="tour-tag"><i class="bi bi-people"></i> Máx. 10 personas</span>
                        <span class="tour-tag"><i class="bi bi-star"></i> Guía incluido</span>
                    </div>
                </div>
                
                <!-- Formulario de Reserva -->
                <form id="reservaForm" class="reserva-form">
                    <!-- Sección 1: Información Personal -->
                    <div class="form-section">
                        <h4 class="form-section-title"><i class="bi bi-person-badge"></i> Información Personal</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="nombre" class="required">
                                    <i class="bi bi-person"></i> Nombre Completo
                                </label>
                                <input type="text" id="nombre" name="nombre" class="form-control" placeholder="Ej: María González" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="email" class="required">
                                    <i class="bi bi-envelope"></i> Correo Electrónico
                                </label>
                                <input type="email" id="email" name="email" class="form-control" placeholder="ejemplo@email.com" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="telefono" class="required">
                                    <i class="bi bi-telephone"></i> Teléfono
                                </label>
                                <input type="tel" id="telefono" name="telefono" class="form-control" placeholder="0412-1234567" required>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Sección 2: Detalles de la Reserva -->
                    <div class="form-section">
                        <h4 class="form-section-title"><i class="bi bi-calendar-event"></i> Detalles de la Reserva</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="fecha" class="required">
                                    <i class="bi bi-calendar-date"></i> Fecha del Tour
                                </label>
                                <input type="text" id="fecha" name="fecha" class="form-control" placeholder="Selecciona una fecha" required readonly>
                            </div>
                            
                            <div class="form-group">
                                <label for="personas" class="required">
                                    <i class="bi bi-people"></i> Número de Personas
                                </label>
                                <select id="personas" name="personas" class="form-control" required>
                                    <option value="" disabled selected>Selecciona</option>
                                    <option value="1">1 persona</option>
                                    <option value="2">2 personas</option>
                                    <option value="3">3 personas</option>
                                    <option value="4">4 personas</option>
                                    <option value="5">5 personas</option>
                                    <option value="6">6 personas</option>
                                    <option value="7">7 personas</option>
                                    <option value="8">8 personas</option>
                                    <option value="9">9 personas</option>
                                    <option value="10">10 personas</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="comentarios">
                                <i class="bi bi-chat-text"></i> Comentarios Especiales
                            </label>
                            <textarea id="comentarios" name="comentarios" class="form-control" rows="3" placeholder="Alergias alimenticias, requerimientos especiales, preferencias..."></textarea>
                        </div>
                    </div>
                    
                    <!-- Sección 3: Método de Pago -->
                    <div class="form-section">
                        <h4 class="form-section-title"><i class="bi bi-credit-card"></i> Método de Pago</h4>
                        <p style="color: #666; margin-bottom: 1rem;">Selecciona cómo deseas realizar el pago.</p>
                        
                        <div class="pago-methods">
                            <!-- Pago Móvil -->
                            <div class="pago-method" data-method="movil">
                                <div class="pago-icon">
                                    <i class="bi bi-phone"></i>
                                </div>
                                <div class="pago-name">Pago Móvil</div>
                                <div class="pago-desc">Transferencia rápida</div>
                            </div>
                            
                            <!-- Tarjeta -->
                            <div class="pago-method" data-method="tarjeta">
                                <div class="pago-icon">
                                    <i class="bi bi-credit-card"></i>
                                </div>
                                <div class="pago-name">Tarjeta</div>
                                <div class="pago-desc">Crédito/Débito</div>
                            </div>
                            
                            <!-- Efectivo -->
                            <div class="pago-method" data-method="efectivo">
                                <div class="pago-icon">
                                    <i class="bi bi-cash"></i>
                                </div>
                                <div class="pago-name">Efectivo</div>
                                <div class="pago-desc">Pago al llegar</div>
                            </div>
                        </div>
                        
                        <input type="hidden" id="metodo_pago" name="metodo_pago" value="">
                        
                        <!-- Formulario de Pago Móvil -->
                        <div id="pago-movil-form" class="pago-form">
                            <h5 class="pago-form-title"><i class="bi bi-phone"></i> Información para Pago Móvil</h5>
                            <p style="color: #666; margin-bottom: 1rem;">Realiza el pago usando cualquiera de las siguientes opciones:</p>
                            
                            <div class="banco-info">
                                <h5><i class="bi bi-bank"></i> Banco de Venezuela</h5>
                                <p><strong>Número:</strong> 0102-1234-5678-9012</p>
                                <p><strong>C.I.:</strong> V-12345678</p>
                                <p><strong>Titular:</strong> Ruta Turística Caño Salao</p>
                            </div>
                            
                            <div class="qr-container">
                                <div class="qr-code">
                                    <i class="bi bi-qr-code-scan"></i>
                                </div>
                                <p style="color: #666; font-size: 0.9rem;">Escanea este código QR para pagar</p>
                            </div>
                        </div>
                        
                        <!-- Formulario de Tarjeta -->
                        <div id="pago-tarjeta-form" class="pago-form">
                            <h5 class="pago-form-title"><i class="bi bi-credit-card"></i> Información de Tarjeta</h5>
                            
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="tarjeta_numero" class="required">
                                        <i class="bi bi-credit-card"></i> Número de Tarjeta
                                    </label>
                                    <input type="text" id="tarjeta_numero" name="tarjeta_numero" class="form-control" placeholder="1234 5678 9012 3456" maxlength="19">
                                </div>
                                
                                <div class="form-group">
                                    <label for="tarjeta_titular" class="required">
                                        <i class="bi bi-person"></i> Nombre del Titular
                                    </label>
                                    <input type="text" id="tarjeta_titular" name="tarjeta_titular" class="form-control" placeholder="Como aparece en la tarjeta">
                                </div>
                                
                                <div class="form-group">
                                    <label for="tarjeta_vencimiento" class="required">
                                        <i class="bi bi-calendar"></i> Fecha de Vencimiento
                                    </label>
                                    <input type="text" id="tarjeta_vencimiento" name="tarjeta_vencimiento" class="form-control" placeholder="MM/AA" maxlength="5">
                                </div>
                                
                                <div class="form-group">
                                    <label for="tarjeta_cvv" class="required">
                                        <i class="bi bi-shield-lock"></i> CVV
                                    </label>
                                    <input type="password" id="tarjeta_cvv" name="tarjeta_cvv" class="form-control" placeholder="123" maxlength="3">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Formulario de Efectivo -->
                        <div id="pago-efectivo-form" class="pago-form">
                            <h5 class="pago-form-title"><i class="bi bi-cash"></i> Pago en Efectivo</h5>
                            <p style="color: #666; margin-bottom: 1rem;">Puedes realizar el pago en efectivo al llegar al punto de encuentro. Asegúrate de traer el monto exacto.</p>
                        </div>
                    </div>
                    
                    <!-- Resumen de Pago -->
                    <div class="resumen-pago">
                        <div class="resumen-header">
                            <div class="resumen-title"><i class="bi bi-receipt"></i> Resumen de Pago</div>
                            <div class="contribution-badge">
                                <i class="bi bi-heart"></i> Contribuyes al desarrollo comunitario
                            </div>
                        </div>
                        
                        <div class="resumen-items">
                            <div class="resumen-item">
                                <span class="resumen-label">Tour seleccionado:</span>
                                <span class="resumen-value" id="resumen-tour">-</span>
                            </div>
                            
                            <div class="resumen-item">
                                <span class="resumen-label">Fecha:</span>
                                <span class="resumen-value" id="resumen-fecha">-</span>
                            </div>
                            
                            <div class="resumen-item">
                                <span class="resumen-label">Número de personas:</span>
                                <span class="resumen-value" id="resumen-personas">-</span>
                            </div>
                            
                            <div class="resumen-item">
                                <span class="resumen-label">Precio por persona:</span>
                                <span class="resumen-value" id="resumen-precio-unitario">$0.00</span>
                            </div>
                            
                            <div class="resumen-item">
                                <span class="resumen-label">Subtotal:</span>
                                <span class="resumen-value" id="resumen-subtotal">$0.00</span>
                            </div>
                            
                            <div class="resumen-item">
                                <span class="resumen-label">Contribución comunitaria (5%):</span>
                                <span class="resumen-value" id="resumen-contribucion">$0.00</span>
                            </div>
                        </div>
                        
                        <div class="resumen-total">
                            <span>Total a pagar:</span>
                            <span id="resumen-total">$0.00</span>
                        </div>
                    </div>
                    
                    <!-- Términos y Condiciones -->
                    <div class="terms-container">
                        <div class="terms-checkbox">
                            <input type="checkbox" id="acepto_terminos" name="acepto_terminos" required>
                            <div class="terms-text">
                                Acepto los <a href="#" class="terms-link">términos y condiciones</a> y la <a href="#" class="terms-link">política de privacidad</a>.
                            </div>
                        </div>
                    </div>
                    
                    <!-- Botón de Reserva -->
                    <button type="submit" class="btn-reservar">
                        <i class="bi bi-calendar-check"></i> Confirmar Reserva
                    </button>
                </form>
                
                <!-- Mensaje de Éxito -->
                <div id="reserva-success" class="reserva-success">
                    <div class="success-icon">
                        <i class="bi bi-check-circle"></i>
                    </div>
                    <h3>¡Reserva Confirmada!</h3>
                    <p>Tu reserva ha sido procesada exitosamente.</p>
                    
                    <div class="reserva-details">
                        <h4>Detalles de tu Reserva</h4>
                        <div class="resumen-item">
                            <span>Código de Reserva:</span>
                            <span id="reserva-codigo" style="font-weight: 700;">CS-2024-001</span>
                        </div>
                        <div class="resumen-item">
                            <span>Tour:</span>
                            <span id="reserva-detalle-tour">-</span>
                        </div>
                        <div class="resumen-item">
                            <span>Fecha:</span>
                            <span id="reserva-detalle-fecha">-</span>
                        </div>
                        <div class="resumen-item">
                            <span>Personas:</span>
                            <span id="reserva-detalle-personas">-</span>
                        </div>
                        <div class="resumen-item">
                            <span>Total:</span>
                            <span id="reserva-detalle-total">$0.00</span>
                        </div>
                    </div>
                    
                    <div class="reserva-id" id="reserva-id-display">Reserva #CS-2024-001</div>
                </div>
            </section>
        </div>
    </div>

    <!-- Banner Sticky -->
    <div id="sticky-banner" class="sticky-banner">
        <div class="container">
            <div class="sticky-banner-content">
                <div class="sticky-tour-info">
                    <div class="sticky-tour-name" id="sticky-tour-name">Selecciona un tour</div>
                    <div class="sticky-tour-price" id="sticky-tour-price">$0.00 total</div>
                </div>
                <button id="scroll-to-form" class="btn-reservar" style="width: auto; padding: 0.8rem 1.5rem;">
                    <i class="bi bi-arrow-up"></i> Completar Reserva
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3 class="times-font"><i class="bi bi-geo-alt"></i> Ruta Turística Caño Salao</h3>
                    <p>Sistema de reservas en línea como parte del proyecto factible de desarrollo turístico sostenible.</p>
                </div>
                <div class="footer-column">
                    <h3 class="times-font"><i class="bi bi-link"></i> Enlaces Rápidos</h3>
                    <ul class="footer-links">
                        <li><a href="../index.html"><i class="bi bi-house"></i> Inicio</a></li>
                        <li><a href="Servicios.html"><i class="bi bi-list-check"></i> Servicios</a></li>
                        <li><a href="reservas.html" class="active"><i class="bi bi-calendar-check"></i> Reservas</a></li>
                        <li><a href="Contacto.html"><i class="bi bi-telephone"></i> Contacto</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>© 2025 Sistema de Reservas Caño Salao. Proyecto factible para el desarrollo turístico sostenible.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/es.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ========== CONFIGURACIÓN ==========
            const API_BASE_URL = 'https://cano-salao.onrender.com/api';
            let tours = [];
            let selectedTour = null;

            // ========== ELEMENTOS DEL DOM ==========
            const toursContainer = document.getElementById('tours-container');
            const selectedTourInfo = document.getElementById('selected-tour-info');
            const reservaForm = document.getElementById('reservaForm');
            const reservaSuccess = document.getElementById('reserva-success');
            const stickyBanner = document.getElementById('sticky-banner');

            // ========== CARGAR TOURS ==========
            function loadTours() {
                toursContainer.innerHTML = `
                    <div class="loading-tours" style="text-align: center; padding: 2rem;">
                        <div class="loading-spinner"></div>
                        <p>Cargando tours disponibles...</p>
                    </div>
                `;

                // Intentar cargar desde API
                fetch(`${API_BASE_URL}/tours`)
                    .then(response => {
                        if (!response.ok) throw new Error('Error API');
                        return response.json();
                    })
                    .then(data => {
                        tours = data;
                        renderTours();
                        selectTourFromURL();
                        if (!selectedTour && tours.length > 0) {
                            selectTour(tours[0]);
                        }
                    })
                    .catch(error => {
                        console.log('Usando datos de respaldo:', error);
                        loadFallbackTours();
                    });
            }

            // Datos de respaldo
            function loadFallbackTours() {
                tours = [
                    {
                        id: 1,
                        nombre: 'Tour Básico por los Manglares',
                        descripcion: 'Recorrido introductorio por los manglares de Caño Salao, ideal para quienes visitan por primera vez.',
                        precio: 25.00,
                        duracion: '2 horas',
                        capacidad: 'Máx. 10 personas',
                        popular: true,
                        categoria: 'budget'
                    },
                    {
                        id: 2,
                        nombre: 'Tour Completo Experiencia',
                        descripcion: 'Vive la experiencia completa: manglares, avistamiento de aves, historia local y gastronomía tradicional.',
                        precio: 45.00,
                        duracion: '4 horas',
                        capacidad: 'Máx. 8 personas',
                        popular: true,
                        categoria: 'popular'
                    },
                    {
                        id: 3,
                        nombre: 'Tour Personalizado VIP',
                        descripcion: 'Experiencia exclusiva diseñada según tus intereses. Incluye fotógrafo personal y guía especializado.',
                        precio: 65.00,
                        duracion: '6 horas',
                        capacidad: 'Máx. 6 personas',
                        popular: false,
                        categoria: 'premium'
                    }
                ];
                
                renderTours();
                selectTourFromURL();
                if (!selectedTour && tours.length > 0) {
                    selectTour(tours[0]);
                }
            }

            // Renderizar tours
            function renderTours() {
                toursContainer.innerHTML = '';
                
                tours.forEach(tour => {
                    const tourCard = document.createElement('div');
                    tourCard.className = 'tour-card';
                    tourCard.dataset.tourId = tour.id;
                    tourCard.dataset.categoria = tour.categoria || 'all';
                    
                    tourCard.innerHTML = `
                        ${tour.popular ? '<div class="tour-badge">Más Popular</div>' : ''}
                        <div class="tour-header">
                            <h3 class="tour-title">${tour.nombre}</h3>
                            <div class="tour-price">$${tour.precio.toFixed(2)}</div>
                        </div>
                        <p class="tour-desc">${tour.descripcion}</p>
                        <div class="tour-details">
                            <span class="tour-detail"><i class="bi bi-clock"></i> ${tour.duracion}</span>
                            <span class="tour-detail"><i class="bi bi-people"></i> ${tour.capacidad}</span>
                        </div>
                    `;
                    
                    tourCard.addEventListener('click', () => selectTour(tour));
                    toursContainer.appendChild(tourCard);
                });
                
                setupFilters();
            }

            // Configurar filtros
            function setupFilters() {
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                        
                        const filter = this.dataset.filter;
                        filterTours(filter);
                    });
                });
            }

            // Filtrar tours
            function filterTours(filter) {
                const tourCards = document.querySelectorAll('.tour-card');
                
                tourCards.forEach(card => {
                    if (filter === 'all') {
                        card.style.display = 'block';
                    } else if (filter === 'popular') {
                        const isPopular = card.querySelector('.tour-badge');
                        card.style.display = isPopular ? 'block' : 'none';
                    } else {
                        const categoria = card.dataset.categoria;
                        card.style.display = categoria === filter ? 'block' : 'none';
                    }
                });
            }

            // Seleccionar tour desde URL
            function selectTourFromURL() {
                const urlParams = new URLSearchParams(window.location.search);
                const tourId = urlParams.get('tour');
                
                if (tourId && tours.length > 0) {
                    const tour = tours.find(t => t.id == tourId);
                    if (tour) {
                        selectTour(tour);
                    }
                }
            }

            // Seleccionar un tour
            function selectTour(tour) {
                selectedTour = tour;
                
                // Actualizar selección visual
                document.querySelectorAll('.tour-card').forEach(card => {
                    card.classList.remove('selected');
                    if (parseInt(card.dataset.tourId) === tour.id) {
                        card.classList.add('selected');
                    }
                });
                
                // Actualizar información del tour
                document.getElementById('selected-tour-name').textContent = tour.nombre;
                document.getElementById('selected-tour-price').textContent = `$${tour.precio.toFixed(2)}`;
                document.getElementById('selected-tour-description').textContent = tour.descripcion;
                
                // Mostrar información del tour
                selectedTourInfo.style.display = 'block';
                
                // Actualizar resumen
                document.getElementById('resumen-tour').textContent = tour.nombre;
                document.getElementById('resumen-precio-unitario').textContent = `$${tour.precio.toFixed(2)}`;
                
                // Actualizar banner sticky
                document.getElementById('sticky-tour-name').textContent = tour.nombre;
                
                // Recalcular total
                updateResumenPago();
                
                // Mostrar banner sticky
                stickyBanner.classList.add('show');
            }

            // Actualizar resumen de pago
            function updateResumenPago() {
                if (!selectedTour) return;
                
                const fecha = document.getElementById('fecha').value;
                const personas = parseInt(document.getElementById('personas').value) || 1;
                const precioUnitario = selectedTour.precio;
                const subtotal = precioUnitario * personas;
                const contribucion = subtotal * 0.05;
                const total = subtotal + contribucion;
                
                document.getElementById('resumen-fecha').textContent = fecha || '-';
                document.getElementById('resumen-personas').textContent = personas;
                document.getElementById('resumen-subtotal').textContent = `$${subtotal.toFixed(2)}`;
                document.getElementById('resumen-contribucion').textContent = `$${contribucion.toFixed(2)}`;
                document.getElementById('resumen-total').textContent = `$${total.toFixed(2)}`;
                
                document.getElementById('sticky-tour-price').textContent = `$${total.toFixed(2)} total`;
            }

            // ========== CONFIGURAR MÉTODOS DE PAGO ==========
            function setupPagoMethods() {
                const pagoMethods = document.querySelectorAll('.pago-method');
                const pagoForms = document.querySelectorAll('.pago-form');
                
                pagoMethods.forEach(method => {
                    method.addEventListener('click', function() {
                        // Remover selección anterior
                        pagoMethods.forEach(m => m.classList.remove('selected'));
                        this.classList.add('selected');
                        
                        // Ocultar formularios
                        pagoForms.forEach(form => form.classList.remove('active'));
                        
                        // Actualizar campo oculto
                        const methodType = this.dataset.method;
                        document.getElementById('metodo_pago').value = methodType;
                        
                        // Mostrar formulario correspondiente
                        document.getElementById(`pago-${methodType}-form`).classList.add('active');
                    });
                });
                
                // Seleccionar primer método
                if (pagoMethods.length > 0) {
                    pagoMethods[0].click();
                }
            }

            // ========== CONFIGURAR FLATPICKR ==========
            function setupFlatpickr() {
                const fechaInput = document.getElementById('fecha');
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1);
                
                flatpickr(fechaInput, {
                    locale: 'es',
                    minDate: tomorrow,
                    dateFormat: 'Y-m-d',
                    disable: [
                        function(date) {
                            return date.getDay() === 1; // Deshabilitar lunes
                        }
                    ],
                    onChange: updateResumenPago
                });
            }

            // ========== CONFIGURAR FORMULARIO ==========
            function setupForm() {
                // Event listeners
                document.getElementById('personas').addEventListener('change', updateResumenPago);
                
                // Envío del formulario
                reservaForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    if (!selectedTour) {
                        alert('Por favor, selecciona un tour primero.');
                        return;
                    }
                    
                    if (!document.getElementById('acepto_terminos').checked) {
                        alert('Debes aceptar los términos y condiciones.');
                        return;
                    }
                    
                    // Preparar datos de reserva
                    const reservaData = {
                        tour_id: selectedTour.id,
                        tour_nombre: selectedTour.nombre,
                        nombre: document.getElementById('nombre').value,
                        email: document.getElementById('email').value,
                        telefono: document.getElementById('telefono').value,
                        fecha: document.getElementById('fecha').value,
                        personas: parseInt(document.getElementById('personas').value),
                        comentarios: document.getElementById('comentarios').value,
                        metodo_pago: document.getElementById('metodo_pago').value,
                        total: parseFloat(document.getElementById('resumen-total').textContent.replace('$', '')),
                        estado: 'pendiente'
                    };
                    
                    // Mostrar éxito
                    showReservaSuccess(reservaData);
                });
            }

            // Mostrar éxito de reserva
            function showReservaSuccess(reservaData) {
                const reservaId = `CS-${new Date().getFullYear()}-${Math.floor(1000 + Math.random() * 9000)}`;
                
                document.getElementById('reserva-codigo').textContent = reservaId;
                document.getElementById('reserva-detalle-tour').textContent = reservaData.tour_nombre;
                document.getElementById('reserva-detalle-fecha').textContent = reservaData.fecha;
                document.getElementById('reserva-detalle-personas').textContent = reservaData.personas;
                document.getElementById('reserva-detalle-total').textContent = `$${reservaData.total.toFixed(2)}`;
                document.getElementById('reserva-id-display').textContent = `Reserva #${reservaId}`;
                
                reservaSuccess.classList.add('show');
                reservaForm.style.display = 'none';
                stickyBanner.classList.remove('show');
                
                // Guardar en localStorage
                const reservasPrevias = JSON.parse(localStorage.getItem('cano_salao_reservas') || '[]');
                reservasPrevias.push({
                    id: reservaId,
                    ...reservaData,
                    fecha_reserva: new Date().toISOString()
                });
                localStorage.setItem('cano_salao_reservas', JSON.stringify(reservasPrevias));
            }

            // ========== BOTÓN SCROLL TO FORM ==========
            document.getElementById('scroll-to-form').addEventListener('click', function() {
                document.querySelector('.reserva-form-section').scrollIntoView({ 
                    behavior: 'smooth' 
                });
            });

            // ========== INICIALIZAR TODO ==========
            loadTours();
            setupFlatpickr();
            setupPagoMethods();
            setupForm();
            
            // Configurar menú móvil
            const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
            const mobileMenuClose = document.getElementById('mobile-menu-close');
            const mobileMenuContainer = document.getElementById('mobile-menu-container');
            const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
            
            if (mobileMenuToggle) {
                mobileMenuToggle.addEventListener('click', function() {
                    mobileMenuContainer.classList.add('active');
                    mobileMenuOverlay.classList.add('active');
                });
                
                mobileMenuClose.addEventListener('click', function() {
                    mobileMenuContainer.classList.remove('active');
                    mobileMenuOverlay.classList.remove('active');
                });
                
                mobileMenuOverlay.addEventListener('click', function() {
                    mobileMenuContainer.classList.remove('active');
                    mobileMenuOverlay.classList.remove('active');
                });
            }
        });
    </script>
</body>
</html>
