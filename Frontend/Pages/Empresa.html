<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Empresa de Producción Social - Ruta Turística Caño Salao | Turismo Sostenible</title>
    <meta name="description" content="Conoce nuestra empresa de producción social de transporte turístico acuático en Caño Salao, Barcelona, Venezuela. Modelo de negocio sostenible que beneficia a la comunidad.">
    <meta name="keywords" content="empresa Caño Salao, producción social, turismo sostenible, desarrollo comunitario, Barcelona Venezuela, empresa social turismo">
    <meta property="og:title" content="Empresa de Producción Social - Ruta Turística Caño Salao">
    <meta property="og:description" content="Modelo de negocio sostenible que combina desarrollo económico, protección ambiental y beneficio comunitario">
    <meta property="og:type" content="website">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="../media/Logo_cano_60.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../media/Logo_cano_60.png">
    <link rel="apple-touch-icon" href="../media/Logo_cano_120.png">
    <meta name="theme-color" content="#0d3b66">
    
    <!-- Preload de fuentes críticas -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Times+New+Roman:ital,wght@0,400;0,700;1,400&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Times+New+Roman:ital,wght@0,400;0,700;1,400&display=swap"></noscript>
    
    <!-- Estilos críticos inline -->
    <style>
        /* SOLO ESTILOS CRÍTICOS PARA RENDER INICIAL */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: rgba(0,0,0,0.1);
            -webkit-touch-callout: none;
        }
        
        html, body {
            width: 100%;
            overflow-x: hidden;
            touch-action: manipulation;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.5;
            opacity: 0;
            animation: fadeIn 0.3s ease-out forwards;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            position: relative;
            background: #fff;
        }
        
        @keyframes fadeIn {
            to { opacity: 1; }
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* ===== LOADER ===== */
        #page-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.3s ease;
        }
        
        #page-loader.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }
        
        .loader-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #0d3b66;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Estilo para spinners giratorios */
        .spin {
            animation: spin 1s linear infinite;
        }
        
        /* ===== HEADER ===== */
        header {
            background: linear-gradient(135deg, #1a7fb8 0%, #0d3b66 100%);
            color: white;
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 0.5rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 0.6rem;
            flex-shrink: 0;
            z-index: 1002;
        }
        
        .logo-img {
            width: 35px;
            height: 35px;
            object-fit: contain;
            border-radius: 50%;
            display: block;
            flex-shrink: 0;
            -webkit-user-select: none;
            user-select: none;
        }
        
        .logo h1 {
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            margin: 0;
            white-space: nowrap;
        }
        
        .text-orange {
            color: #FF8C42;
        }
        
        /* ===== NAVEGACIÓN DESKTOP ===== */
        .nav-center {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        nav {
            width: 100%;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 0.5rem;
            align-items: center;
            margin: 0;
            padding: 0;
            justify-content: center;
        }
        
        nav ul li {
            position: relative;
        }
        
        nav ul li a {
            color: rgba(255,255,255,0.95);
            text-decoration: none;
            font-weight: 500;
            padding: 0.4rem 0.6rem;
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 0.3rem;
            transition: all 0.2s ease;
            font-size: 0.9rem;
            white-space: nowrap;
            -webkit-tap-highlight-color: rgba(255,255,255,0.1);
            touch-action: manipulation;
        }
        
        nav ul li a:hover {
            background: rgba(255,255,255,0.1);
        }
        
        nav ul li a.active {
            background: rgba(255,255,255,0.15);
        }
        
        /* ===== MENÚ MÓVIL ===== */
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            padding: 0.5rem;
            transition: all 0.2s ease;
            flex-shrink: 0;
            z-index: 1002;
            -webkit-tap-highlight-color: rgba(255,255,255,0.3);
            touch-action: manipulation;
            min-width: 44px;
            min-height: 44px;
            align-items: center;
            justify-content: center;
        }
        
        .mobile-menu-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .mobile-menu-overlay.active {
            display: block;
            opacity: 1;
        }
        
        .mobile-menu-container {
            position: fixed;
            top: 0;
            right: -100%;
            width: 85%;
            max-width: 300px;
            height: 100%;
            background: linear-gradient(135deg, #1a7fb8 0%, #0d3b66 100%);
            z-index: 1000;
            overflow-y: auto;
            transition: right 0.3s ease;
            box-shadow: -2px 0 10px rgba(0,0,0,0.3);
        }
        
        .mobile-menu-container.active {
            right: 0;
        }
        
        .mobile-menu-header {
            padding: 1rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .mobile-menu-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            padding: 0.5rem;
            -webkit-tap-highlight-color: rgba(255,255,255,0.3);
            touch-action: manipulation;
            min-width: 44px;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .mobile-menu-nav {
            padding: 1rem 0;
        }
        
        .mobile-menu-nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
        }
        
        .mobile-menu-nav li {
            border-bottom: 1px solid rgba(255,255,255,0.1);
            width: 100%;
        }
        
        .mobile-menu-nav li:last-child {
            border-bottom: none;
        }
        
        .mobile-menu-nav a {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 1.5rem;
            color: white;
            text-decoration: none;
            font-size: 1.1rem;
            transition: background 0.2s ease;
            -webkit-tap-highlight-color: rgba(255,255,255,0.2);
            touch-action: manipulation;
            width: 100%;
        }
        
        .mobile-menu-nav a.active {
            background: rgba(255,255,255,0.15);
            font-weight: 600;
        }
        
        .mobile-menu-nav a:hover {
            background: rgba(255,255,255,0.1);
        }
        
        /* ===== SISTEMA DE USUARIO ===== */
        .user-menu-container {
            position: relative;
            z-index: 1002;
        }
        
        .logged-user {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 6px;
            transition: background-color 0.2s ease;
            -webkit-tap-highlight-color: transparent;
            min-height: 44px;
        }
        
        .logged-user:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .user-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3498db, #2c3e50);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            flex-shrink: 0;
            transition: transform 0.2s ease;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .user-avatar:hover {
            transform: scale(1.05);
        }
        
        .user-info {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        
        .user-name {
            font-size: 0.85rem;
            font-weight: 600;
            color: white;
            white-space: nowrap;
            max-width: 120px;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .user-role {
            font-size: 0.7rem;
            color: rgba(255, 255, 255, 0.8);
            background: rgba(255, 255, 255, 0.1);
            padding: 1px 6px;
            border-radius: 10px;
            display: inline-block;
            text-transform: uppercase;
        }
        
        .user-role.admin {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            font-weight: bold;
        }
        
        /* Dropdown menu styles */
        .user-dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            min-width: 220px;
            z-index: 1001;
            overflow: hidden;
            margin-top: 5px;
            display: none;
            animation: fadeInDown 0.2s ease;
            border: 1px solid #eee;
        }
        
        .user-dropdown-menu.show {
            display: block;
        }
        
        .user-dropdown-header {
            padding: 12px 15px;
            background: linear-gradient(135deg, #1a7fb8, #0d3b66);
            color: white;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .user-dropdown-email {
            font-size: 0.85rem;
            color: rgba(255,255,255,0.9);
            margin-top: 2px;
        }
        
        .user-dropdown-menu a {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 15px;
            color: #333;
            text-decoration: none;
            border-bottom: 1px solid #eee;
            transition: background 0.2s;
            font-size: 14px;
            cursor: pointer;
        }
        
        .user-dropdown-menu a:hover {
            background: #f5f5f5;
        }
        
        .user-dropdown-menu a:last-child {
            border-bottom: none;
            color: #e74c3c;
        }
        
        .user-dropdown-menu a:last-child:hover {
            background: #ffeaea;
        }
        
        .admin-badge {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
            margin-left: auto;
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Sección de autenticación */
        .auth-section {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            flex-shrink: 0;
            z-index: 1002;
        }
        
        .login-btn {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            background: rgba(255,255,255,0.15);
            color: white;
            padding: 0.4rem 0.8rem;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s ease;
            border: 1px solid rgba(255,255,255,0.2);
            font-size: 0.85rem;
            white-space: nowrap;
            min-height: 44px;
        }
        
        .login-btn:hover {
            background: rgba(255,255,255,0.25);
        }
        
        /* ===== ALERTAS ===== */
        .site-alert {
            position: fixed;
            top: 80px;
            right: 20px;
            padding: 12px 20px;
            border-radius: 6px;
            z-index: 9998;
            max-width: 300px;
            display: none;
            animation: slideInRight 0.3s ease;
        }
        
        .site-alert.success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        
        .site-alert.error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        
        .site-alert.info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }
        
        .site-alert.warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* ===== HERO SECTION CORREGIDO - SOLO COLOR AZUL ===== */
        .page-hero {
            min-height: 60vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            padding: 4rem 0;
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, #1a5276 0%, #2c82c9 100%) !important;
            background-attachment: fixed !important;
            background-size: cover !important;
            background-position: center !important;
            background-repeat: no-repeat !important;
        }
        
        .page-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a5276 0%, #2c82c9 100%);
            z-index: 1;
        }
        
        .page-hero .container {
            position: relative;
            z-index: 2;
            max-width: 1000px;
            padding: 0 1rem;
        }
        
        .page-hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            animation: fadeInDown 0.8s ease-out;
        }
        
        .page-hero .hero-subtitle {
            font-size: 1.5rem;
            max-width: 800px;
            margin: 0 auto 2.5rem;
            opacity: 0.95;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
            animation: fadeInUp 0.8s ease-out 0.2s both;
            line-height: 1.5;
            font-weight: 400;
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .menu-toggle {
                display: flex !important;
            }
            
            .nav-center {
                display: none !important;
            }
            
            .header-content {
                flex-wrap: nowrap;
            }
            
            .logo {
                flex: 1;
            }
            
            .logo h1 {
                font-size: 1.4rem;
            }
            
            .auth-section {
                order: 3;
            }
            
            .mobile-menu-container {
                z-index: 1000;
            }
            
            .mobile-menu-overlay {
                z-index: 999;
            }
            
            /* Hero responsive */
            .page-hero {
                min-height: 50vh;
                padding: 3rem 0;
            }
            
            .page-hero h1 {
                font-size: 2.2rem;
            }
            
            .page-hero .hero-subtitle {
                font-size: 1.1rem;
            }
            
            .user-info {
                display: none;
            }
            
            .user-dropdown-menu {
                position: fixed;
                top: 60px;
                right: 10px;
                left: 10px;
                min-width: auto;
            }
        }
        
        @media (max-width: 576px) {
            .logo-img {
                width: 35px;
                height: 35px;
            }
            
            .logo h1 {
                font-size: 1.3rem;
            }
            
            .page-hero h1 {
                font-size: 1.8rem;
            }
            
            .page-hero .hero-subtitle {
                font-size: 1rem;
            }
            
            .user-avatar {
                width: 32px;
                height: 32px;
                font-size: 14px;
            }
        }
        
        /* Breadcrumb */
        .breadcrumb {
            background: #f8f9fa;
            padding: 1rem 0;
            font-size: 0.9rem;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        
        .breadcrumb a {
            color: #0d3b66;
            text-decoration: none;
            transition: all 0.2s ease;
        }
        
        .breadcrumb a:hover {
            color: #e62b7e;
        }
        
        .breadcrumb span {
            color: #212529;
            font-weight: 500;
        }
        
        /* Prevenir scroll durante carga */
        body.loading {
            overflow: hidden;
        }
    </style>
    
    <!-- Cargar CSS principal de forma no bloqueante -->
    <link rel="stylesheet" href="../index.css" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="../index.css"></noscript>
    
    <!-- Bootstrap Icons diferido -->
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"></noscript>
    
    <style>
        /* Estilos específicos para la página Empresa */
        /* Contenido principal */
        .page-content {
            padding: 4rem 0;
            background: #f8f9fa;
        }
        
        .content-block {
            background: white;
            border-radius: 12px;
            padding: 3rem;
            margin-bottom: 3rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.12);
        }
        
        .content-block h2 {
            color: #0d3b66;
            margin-bottom: 2rem;
            font-size: 2.2rem;
            position: relative;
            padding-bottom: 1rem;
        }
        
        .content-block h2:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 3px;
            background: #e62b7e;
        }
        
        .history-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 3rem;
            align-items: center;
            margin-top: 2rem;
        }
        
        .history-text {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .history-image {
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        
        .history-image:hover {
            transform: translateY(-5px);
        }
        
        .history-image img {
            width: 100%;
            height: auto;
            display: block;
            transition: transform 0.6s ease;
        }
        
        .history-image:hover img {
            transform: scale(1.05);
        }
        
        /* Grid de contenido */
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .service-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 2rem;
            transition: all 0.3s ease;
            border-left: 4px solid #0d3b66;
        }
        
        .service-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.12);
            border-left-color: #e62b7e;
        }
        
        .service-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: #0d3b66;
        }
        
        .service-item h3 {
            color: #0d3b66;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }
        
        .service-item p, .service-item ul {
            color: #666;
            line-height: 1.6;
        }
        
        .service-item ul {
            padding-left: 1.5rem;
        }
        
        .service-item li {
            margin-bottom: 0.5rem;
        }
        
        /* Factible features mejoradas */
        .factible-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .factible-feature {
            text-align: center;
            padding: 2rem 1.5rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 1px solid rgba(0,0,0,0.05);
        }
        
        .factible-feature:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            border-color: #e62b7e;
        }
        
        .factible-icon {
            font-size: 2.8rem;
            margin-bottom: 1.5rem;
            color: #0d3b66;
            transition: all 0.3s ease;
        }
        
        .factible-feature:hover .factible-icon {
            transform: scale(1.1) rotate(5deg);
            color: #e62b7e;
        }
        
        .factible-feature h3 {
            color: #0d3b66;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }
        
        /* Llamada a la acción */
        .cta-block {
            text-align: center;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 4rem;
            border-radius: 12px;
            margin-top: 3rem;
        }
        
        .cta-block h2 {
            color: #0d3b66;
            margin-bottom: 1.5rem;
        }
        
        /* Botones */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            background: #e62b7e;
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            will-change: transform;
            -webkit-tap-highlight-color: rgba(0,0,0,0.1);
            touch-action: manipulation;
            min-height: 44px;
        }
        
        .btn:hover {
            background: #d81b60;
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        
        /* Responsive para empresa */
        @media (max-width: 992px) {
            .page-hero h1 {
                font-size: 2.8rem;
            }
            
            .page-hero .hero-subtitle {
                font-size: 1.3rem;
            }
            
            .content-block {
                padding: 2rem;
            }
            
            .content-block h2 {
                font-size: 1.8rem;
            }
        }
        
        @media (max-width: 768px) {
            .page-hero {
                min-height: 50vh;
                padding: 3rem 0;
            }
            
            .page-hero h1 {
                font-size: 2.2rem;
            }
            
            .page-hero .hero-subtitle {
                font-size: 1.1rem;
            }
            
            .history-content {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            
            .content-grid, .factible-features {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .cta-block {
                padding: 2.5rem 1.5rem;
            }
        }
        
        @media (max-width: 576px) {
            .page-hero h1 {
                font-size: 1.8rem;
            }
            
            .page-hero .hero-subtitle {
                font-size: 1rem;
            }
            
            .content-block {
                padding: 1.5rem;
            }
            
            .content-block h2 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body class="loading">
    <!-- Sistema de alertas -->
    <div id="site-alert" class="site-alert"></div>
    
    <!-- Loader para experiencia inicial -->
    <div id="page-loader">
        <div class="loader-spinner"></div>
    </div>

    <!-- Header actualizado como en index.html -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <img 
                        src="../media/Logo_cano_60.png" 
                        srcset="../media/Logo_cano_60.png 1x, ../media/Logo_cano_120.png 2x" 
                        alt="Logo Caño Salao - Ruta Turística Marítima" 
                        class="logo-img"
                        width="35" 
                        height="35"
                        loading="eager"
                        aria-hidden="true"
                    >
                    <h1 class="times-font">Caño <span class="text-orange">Salao</span></h1>
                </div>

                <!-- Navegación desktop -->
                <div class="nav-center">
                    <nav>
                        <ul id="main-navigation">
                            <li><a href="../index.html"><i class="bi bi-house"></i> <span>Inicio</span></a></li>
                            <li><a href="Empresa.html" class="active"><i class="bi bi-building"></i> <span>Empresa</span></a></li>
                            <li><a href="Historia.html"><i class="bi bi-journal-text"></i> <span>Historia</span></a></li>
                            <li><a href="Servicios.html"><i class="bi bi-list-check"></i> <span>Servicios</span></a></li>
                            <li><a href="Atracciones.html"><i class="bi bi-star"></i> <span>Atracciones</span></a></li>
                            <li><a href="blog.html"><i class="bi bi-newspaper"></i> <span>Blog</span></a></li>
                            <li><a href="Contacto.html"><i class="bi bi-telephone"></i> <span>Contacto</span></a></li>
                        </ul>
                    </nav>
                </div>

                <!-- Sistema de usuario actualizado -->
                <div class="auth-section">
                    <div class="user-menu-container" id="user-menu-container">
                        <a href="login.html" class="login-btn" id="login-btn">
                            <i class="bi bi-person-circle"></i> <span class="login-text">Iniciar Sesión</span>
                        </a>
                        
                        <div class="logged-user" id="logged-user" style="display: none;">
                            <div class="user-avatar" id="user-avatar" aria-label="Menú de usuario" role="button" tabindex="0" title="Menú de usuario">U</div>
                            <div class="user-info">
                                <div class="user-name" id="user-name">Usuario</div>
                                <div class="user-role" id="user-role">user</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Botón hamburguesa para móvil -->
                <button class="menu-toggle" id="mobile-menu-toggle" aria-label="Abrir menú de navegación" aria-expanded="false">
                    <i class="bi bi-list"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Menú móvil overlay (fondo oscuro) -->
    <div class="mobile-menu-overlay" id="mobile-menu-overlay"></div>

    <!-- Menú móvil (se abre desde la derecha) -->
    <div class="mobile-menu-container" id="mobile-menu-container">
        <div class="mobile-menu-header">
            <div class="logo">
                <img src="../media/Logo_cano_60.png" alt="Logo Caño Salao" class="logo-img" width="35" height="35">
                <h2 class="times-font" style="color: white; font-size: 1.2rem;">Caño <span class="text-orange">Salao</span></h2>
            </div>
            <button class="mobile-menu-close" id="mobile-menu-close" aria-label="Cerrar menú">
                <i class="bi bi-x-lg"></i>
            </button>
        </div>
        
        <nav class="mobile-menu-nav">
            <ul>
                <li><a href="../index.html"><i class="bi bi-house"></i> Inicio</a></li>
                <li><a href="Empresa.html" class="active"><i class="bi bi-building"></i> Empresa</a></li>
                <li><a href="Historia.html"><i class="bi bi-journal-text"></i> Historia</a></li>
                <li><a href="Servicios.html"><i class="bi bi-list-check"></i> Servicios</a></li>
                <li><a href="Atracciones.html"><i class="bi bi-star"></i> Atracciones</a></li>
                <li><a href="Contacto.html"><i class="bi bi-telephone"></i> Contacto</a></li>
                <li id="mobile-user-menu" style="display: none;">
                    <a href="usuario.html"><i class="bi bi-person-circle"></i> Mi Cuenta</a>
                </li>
                <li><a href="login.html"><i class="bi bi-person-circle"></i> Iniciar Sesión</a></li>
            </ul>
        </nav>
    </div>

    <!-- Hero Section CORREGIDO - solo color azul -->
    <section class="page-hero">
        <div class="container">
            <h1 class="times-font">Empresa de Producción Social</h1>
            <p class="times-font hero-subtitle">
                Modelo de negocio sostenible que combina desarrollo económico, protección ambiental y beneficio comunitario
            </p>
        </div>
    </section>

    <!-- Breadcrumb -->
    <section class="breadcrumb">
        <div class="container">
            <a href="../index.html"><i class="bi bi-house"></i> Inicio</a> 
            <i class="bi bi-chevron-right" style="margin: 0 0.5rem; opacity: 0.6;"></i> 
            <span>Empresa</span>
        </div>
    </section>

    <!-- Page Content -->
    <section class="page-content">
        <div class="container">
            <!-- Introducción a la Empresa -->
            <div class="content-block">
                <h2 class="times-font"><i class="bi bi-building"></i> Nuestra Empresa</h2>
                <div class="history-content">
                    <div class="history-text">
                        <p>La empresa de producción social de transporte turístico acuático <strong>"Caño Salao"</strong> se establece como una entidad jurídica con el propósito de ofrecer servicios turísticos acuáticos sostenibles en la comunidad de Caño Salao, ubicada en Barcelona, Municipio Simón Bolívar, estado Anzoátegui.</p>
                        
                        <p>Su razón social refleja su compromiso con la protección del medio ambiente natural y el desarrollo socioeconómico de las comunidades locales. Su principal actividad es la organización de paseos en barco y recorridos por los canales y manglares de la región, ofreciendo a los visitantes la oportunidad de explorar la rica biodiversidad del ecosistema local.</p>
                        
                        <p>Además, se enfoca en la generación de empleo y el impulso de proyectos comunitarios, reinvirtiendo sus ganancias en iniciativas que beneficien a los habitantes de Caño Salao.</p>
                        
                        <a href="Servicios.html" class="btn" style="margin-top: 1rem;">
                            <i class="bi bi-signpost"></i> Conoce Nuestros Servicios
                        </a>
                    </div>
                    <div class="history-image">
                        <img src="https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Nuestra empresa de producción social" loading="lazy">
                    </div>
                </div>
            </div>

            <!-- Misión y Visión -->
            <div class="content-block">
                <h2 class="times-font"><i class="bi bi-bullseye"></i> Misión y Visión</h2>
                <div class="content-grid">
                    <div class="service-item">
                        <div class="service-icon">
                            <i class="bi bi-target"></i>
                        </div>
                        <h3 class="times-font">Misión</h3>
                        <p>Prestar servicios turísticos acuáticos que respeten y preserven el entorno natural único de la región, generando empleo y oportunidades económicas para los habitantes locales, asegurando que los beneficios del turismo se traduzcan en mejoras tangibles para la comunidad.</p>
                    </div>
                    <div class="service-item">
                        <div class="service-icon">
                            <i class="bi bi-eye"></i>
                        </div>
                        <h3 class="times-font">Visión</h3>
                        <p>Convertirnos en un modelo de turismo sostenible, donde la protección del medio ambiente y el bienestar de la comunidad vayan de la mano, posicionándonos como referente en turismo responsable a nivel regional y nacional.</p>
                    </div>
                </div>
            </div>

            <!-- Características Principales -->
            <div class="content-block">
                <h2 class="times-font"><i class="bi bi-star"></i> Características de Nuestra Empresa</h2>
                <div class="factible-features">
                    <div class="factible-feature">
                        <div class="factible-icon">
                            <i class="bi bi-people-fill"></i>
                        </div>
                        <h3 class="times-font">Enfoque Social</h3>
                        <p>Reinversión de utilidades en proyectos comunitarios para el desarrollo sostenible de la comunidad local.</p>
                    </div>
                    <div class="factible-feature">
                        <div class="factible-icon">
                            <i class="bi bi-tree-fill"></i>
                        </div>
                        <h3 class="times-font">Sostenibilidad Ambiental</h3>
                        <p>Operaciones turísticas de bajo impacto ecológico para la preservación del ecosistema de manglares.</p>
                    </div>
                    <div class="factible-feature">
                        <div class="factible-icon">
                            <i class="bi bi-briefcase-fill"></i>
                        </div>
                        <h3 class="times-font">Generación de Empleo</h3>
                        <p>Contratación de guías y personal local para mejorar la economía familiar de la comunidad.</p>
                    </div>
                    <div class="factible-feature">
                        <div class="factible-icon">
                            <i class="bi bi-handshake-fill"></i>
                        </div>
                        <h3 class="times-font">Autogestión Comunitaria</h3>
                        <p>Participación activa de la comunidad en decisiones, fomentando empoderamiento y sentido de pertenencia.</p>
                    </div>
                </div>
            </div>

            <!-- Valores Corporativos -->
            <div class="content-block">
                <h2 class="times-font"><i class="bi bi-heart"></i> Nuestros Valores</h2>
                <div class="content-grid">
                    <div class="service-item">
                        <h3 class="times-font"><i class="bi bi-recycle"></i> Sostenibilidad</h3>
                        <p>Compromiso con la protección del medio ambiente y el uso responsable de los recursos naturales en todas nuestras operaciones.</p>
                    </div>
                    <div class="service-item">
                        <h3 class="times-font"><i class="bi bi-person-heart"></i> Responsabilidad Social</h3>
                        <p>Trabajamos para el beneficio de la comunidad, reinvirtiendo en proyectos que mejoran la calidad de vida local.</p>
                    </div>
                    <div class="service-item">
                        <h3 class="times-font"><i class="bi bi-award"></i> Excelencia</h3>
                        <p>Buscamos la más alta calidad en nuestros servicios, garantizando experiencias memorables para nuestros visitantes.</p>
                    </div>
                    <div class="service-item">
                        <h3 class="times-font"><i class="bi bi-eye-fill"></i> Transparencia</h3>
                        <p>Gestión clara y abierta de nuestros recursos, rindiendo cuentas a la comunidad que servimos.</p>
                    </div>
                </div>
            </div>

            <!-- Impacto Esperado -->
            <div class="content-block">
                <h2 class="times-font"><i class="bi bi-graph-up"></i> Impacto Esperado</h2>
                <div class="content-grid">
                    <div class="service-item">
                        <h3 class="times-font"><i class="bi bi-cash-stack"></i> Impacto Económico</h3>
                        <ul>
                            <li>Generacion de empleo sostenible</li>
                            <li>Diversificación de fuentes de ingreso para familias</li>
                            <li>Reinversión de utilidades en proyectos comunitarios</li>
                            <li>Desarrollo de microempresas complementarias</li>
                            <li>Incremento en el flujo de turistas y visitantes</li>
                        </ul>
                    </div>
                    <div class="service-item">
                        <h3 class="times-font"><i class="bi bi-people-fill"></i> Impacto Social</h3>
                        <ul>
                            <li>Fortalecimiento del tejido social comunitario</li>
                            <li>Valorización de conocimientos y tradiciones locales</li>
                            <li>Mejora de la autoestima e identidad comunitaria</li>
                            <li>Participación activa en la gestión turística</li>
                            <li>Preservación del patrimonio cultural local</li>
                        </ul>
                    </div>
                    <div class="service-item">
                        <h3 class="times-font"><i class="bi bi-tree-fill"></i> Impacto Ambiental</h3>
                        <ul>
                            <li>Conservación de ecosistemas de manglar únicos</li>
                            <li>Protección de especies en riesgo y biodiversidad</li>
                            <li>Educación ambiental para visitantes y comunidad</li>
                            <li>Prácticas turísticas de bajo impacto ecológico</li>
                            <li>Concienciación sobre la importancia de los humedales</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Compromiso con la Comunidad -->
            <div class="content-block">
                <h2 class="times-font"><i class="bi bi-hand-thumbs-up"></i> Compromiso con la Comunidad</h2>
                <div class="history-content">
                    <div class="history-text">
                        <p>Como empresa de producción social, nuestro compromiso principal es con el desarrollo integral de la comunidad de Caño Salao. Trabajamos bajo un modelo de autogestión donde las decisiones se toman colectivamente y los beneficios se reinvierten en proyectos que mejoran la calidad de vida de todos los habitantes.</p>
                        
                        <p>Entre nuestros principales compromisos se encuentran:</p>
                        
                        <ul>
                            <li><strong>Capacitación continua:</strong> Programas de formación en turismo, ecología y atención al cliente para miembros de la comunidad.</li>
                            <li><strong>Reinversión social:</strong> Destino del 100% de las utilidades a proyectos comunitarios previamente aprobados en asamblea.</li>
                            <li><strong>Protección ambiental:</strong> Implementación de prácticas sostenibles y programas de conservación del ecosistema local.</li>
                            <li><strong>Transparencia:</strong> Rendición de cuentas periódica a la comunidad sobre la gestión de recursos y proyectos.</li>
                        </ul>
                        
                        <a href="Contacto.html" class="btn" style="margin-top: 1rem;">
                            <i class="bi bi-chat-dots"></i> Conoce Más Sobre Nuestro Modelo
                        </a>
                    </div>
                    <div class="history-image">
                        <img src="https://images.unsplash.com/photo-1559827260-dc66d52bef19?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Comunidad de Caño Salao trabajando junta" loading="lazy">
                    </div>
                </div>
            </div>

            <!-- Llamada a la Acción -->
            <div class="cta-block">
                <h2 class="times-font">¿Interesado en Conocer Más?</h2>
                <p style="max-width: 600px; margin: 0 auto 2rem; color: #666;">
                    Descubre cómo nuestro modelo de empresa de producción social puede inspirar proyectos similares o cómo puedes apoyar nuestra iniciativa.
                </p>
                <div>
                    <a href="Contacto.html" class="btn" style="margin: 0.5rem; background: #e62b7e;">
                        <i class="bi bi-telephone"></i> Contáctanos
                    </a>
                    <a href="Servicios.html" class="btn" style="margin: 0.5rem; background: transparent; border: 2px solid #0d3b66; color: #0d3b66;">
                        <i class="bi bi-signpost"></i> Ver Servicios
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3 class="times-font"><i class="bi bi-geo-alt"></i> Ruta Turística Caño Salao</h3>
                    <p>Empresa de producción social de transporte turístico acuático comprometida con el desarrollo sostenible de la comunidad y la protección del medio ambiente.</p>
                </div>
                <div class="footer-column">
                    <h3 class="times-font"><i class="bi bi-link"></i> Enlaces Rápidos</h3>
                    <ul class="footer-links">
                        <li><a href="../index.html"><i class="bi bi-house"></i> Inicio</a></li>
                        <li><a href="Empresa.html"><i class="bi bi-building"></i> Empresa</a></li>
                        <li><a href="Historia.html"><i class="bi bi-journal-text"></i> Historia</a></li>
                        <li><a href="Servicios.html"><i class="bi bi-list-check"></i> Servicios</a></li>
                        <li><a href="Atracciones.html"><i class="bi bi-star"></i> Atracciones</a></li>
                        <li><a href="Contacto.html"><i class="bi bi-telephone"></i> Contacto</a></li>
                        <li><a href="login.html"><i class="bi bi-person-circle"></i> Login</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3 class="times-font"><i class="bi bi-people"></i> Síguenos</h3>
                    <div class="social-links">
                        <a href="#" class="social-icon"><i class="bi bi-facebook"></i></a>
                        <a href="#" class="social-icon"><i class="bi bi-instagram"></i></a>
                        <a href="#" class="social-icon"><i class="bi bi-twitter"></i></a>
                        <a href="#" class="social-icon"><i class="bi bi-whatsapp"></i></a>
                    </div>
                    <div style="margin-top: 1rem;">
                        <p style="font-size: 0.9rem;"><i class="bi bi-telephone"></i> +58 412-205-6558</p>
                        <p style="font-size: 0.9rem;"><i class="bi bi-envelope"></i> info@canosalaotours.com</p>
                    </div>
                </div>
            </div>
            <div class="copyright">
                <p><i class="bi bi-c-circle"></i> 2025 Ruta Turística Marítima Caño Salao. Todos los derechos reservados.</p>
                <p><i class="bi bi-mortarboard"></i> Proyecto desarrollado por estudiantes del PNF en Informática - Universidad Politécnica Territorial "José Antonio Anzoátegui"</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript completo con sistema de sesiones persistente -->
    <script>
        // ========== CONFIGURACIÓN ==========
        const API_BASE_URL = 'https://cano-salao.onrender.com/api';
        const STORAGE_KEYS = {
            TOKEN: 'cano_salao_token',
            REFRESH_TOKEN: 'cano_salao_refresh_token',
            USER: 'cano_salao_user',
            SESSION_EXPIRES: 'cano_salao_expires',
            LAST_ACTIVITY: 'cano_salao_last_activity'
        };
        
        // Variables globales
        let currentUser = null;
        let userDropdown = null;
        let userDropdownOpen = false;
        let isMobileMenuOpen = false;
        let isRefreshingToken = false;
        let failedRequestsQueue = [];
        
        // ========== INICIALIZACIÓN ==========
        (function init() {
            console.log('🚀 Iniciando sistema Caño Salao - Empresa...');
            
            // Ocultar loader inmediatamente
            hideLoader();
            
            // Inicializar sistema de usuario
            initializeUserSystem();
            
            // Inicializar eventos
            initializeEvents();
            
            // Mostrar contenido gradualmente
            setTimeout(showContentGradually, 300);
            
            // Iniciar monitoreo de sesión
            startSessionMonitoring();
            
            console.log('✅ Sistema de empresa inicializado');
        })();
        
        // ========== SISTEMA DE GESTIÓN DE TOKENS ==========
        
        // Sistema de cola para peticiones fallidas
        const processFailedQueue = (error, token = null) => {
            failedRequestsQueue.forEach(prom => {
                if (error) {
                    prom.reject(error);
                } else {
                    prom.resolve(token);
                }
            });
            failedRequestsQueue = [];
        };
        
        // Función principal para hacer peticiones con manejo automático de tokens
        async function fetchWithAuth(url, options = {}) {
            // Obtener token de acceso
            const accessToken = getStorageItem(STORAGE_KEYS.TOKEN);
            
            if (!accessToken) {
                console.warn('⚠️ No hay token de acceso disponible');
                return fetch(url, options);
            }
            
            // Añadir encabezado de autorización
            options.headers = {
                ...options.headers,
                'Authorization': `Bearer ${accessToken}`
            };
            
            try {
                const response = await fetch(url, options);
                
                // Si la respuesta es 401 (token expirado o inválido)
                if (response.status === 401) {
                    const responseData = await response.json().catch(() => ({}));
                    
                    // Si el error es de token expirado, intentar refrescar
                    if (responseData.error === 'token_expired' || responseData.error === 'invalid_token') {
                        console.log('🔄 Token expirado, intentando refrescar...');
                        
                        // Si ya estamos refrescando, encolar esta petición
                        if (isRefreshingToken) {
                            return new Promise((resolve, reject) => {
                                failedRequestsQueue.push({ resolve, reject });
                            }).then(newToken => {
                                // Reintentar con nuevo token
                                options.headers = {
                                    ...options.headers,
                                    'Authorization': `Bearer ${newToken}`
                                };
                                return fetch(url, options);
                            }).catch(err => {
                                console.error('Error en cola de refresco:', err);
                                return response; // Devolver respuesta original
                            });
                        }
                        
                        // Marcar que estamos refrescando
                        isRefreshingToken = true;
                        
                        try {
                            // Intentar refrescar el token
                            const newTokens = await refreshTokens();
                            
                            if (newTokens && newTokens.access_token) {
                                // Actualizar token en la petición
                                options.headers = {
                                    ...options.headers,
                                    'Authorization': `Bearer ${newTokens.access_token}`
                                };
                                
                                // Procesar cola de espera
                                processFailedQueue(null, newTokens.access_token);
                                
                                // Reintentar la petición original
                                const retryResponse = await fetch(url, options);
                                isRefreshingToken = false;
                                return retryResponse;
                            } else {
                                // No se pudo refrescar, limpiar sesión
                                throw new Error('No se pudo refrescar el token');
                            }
                        } catch (refreshError) {
                            console.error('❌ Error refrescando token:', refreshError);
                            
                            // Procesar cola con error
                            processFailedQueue(refreshError, null);
                            isRefreshingToken = false;
                            
                            // Limpiar sesión y mostrar login
                            clearUserSession();
                            showLoginInterface();
                            showAlert('Tu sesión ha expirado. Por favor inicia sesión nuevamente.', 'warning');
                            
                            return response; // Devolver respuesta original
                        }
                    }
                }
                
                // Si la respuesta es exitosa, actualizar actividad
                if (response.ok && currentUser) {
                    updateLastActivity();
                }
                
                return response;
                
            } catch (error) {
                console.error('❌ Error en fetchWithAuth:', error);
                throw error;
            }
        }
        
        // Función para refrescar tokens
        async function refreshTokens() {
            const refreshToken = getStorageItem(STORAGE_KEYS.REFRESH_TOKEN);
            
            if (!refreshToken) {
                console.warn('⚠️ No hay refresh token disponible');
                return null;
            }
            
            try {
                console.log('🔄 Refrescando tokens...');
                
                const response = await fetch(`${API_BASE_URL}/auth/refresh`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${refreshToken}`,
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include'
                });
                
                if (response.ok) {
                    const data = await response.json();
                    
                    // Guardar nuevos tokens
                    saveTokens(data.access_token, data.refresh_token);
                    
                    // Actualizar usuario si viene en la respuesta
                    if (data.user) {
                        saveUserData(data.user);
                        currentUser = data.user;
                        updateUserInfo();
                    }
                    
                    // Actualizar expiración
                    updateSessionExpiration();
                    
                    console.log('✅ Tokens refrescados exitosamente');
                    return {
                        access_token: data.access_token,
                        refresh_token: data.refresh_token
                    };
                } else {
                    console.error('❌ Error en respuesta de refresh:', response.status);
                    return null;
                }
            } catch (error) {
                console.error('❌ Error en refreshTokens:', error);
                return null;
            }
        }
        
        // ========== SISTEMA DE SESIÓN PERSISTENTE ==========
        
        function initializeUserSystem() {
            console.log('🔐 Verificando sesión del usuario...');
            
            // Verificar si la sesión ha expirado
            if (isSessionExpired()) {
                console.log('⚠️ Sesión expirada, limpiando...');
                clearUserSession();
                showLoginInterface();
                return;
            }
            
            // Cargar datos del usuario
            const userData = getStorageItem(STORAGE_KEYS.USER);
            const token = getStorageItem(STORAGE_KEYS.TOKEN);
            const refreshToken = getStorageItem(STORAGE_KEYS.REFRESH_TOKEN);
            
            if (token && userData && refreshToken) {
                try {
                    currentUser = JSON.parse(userData);
                    console.log('✅ Usuario encontrado:', currentUser.nombre);
                    
                    // Mostrar interfaz de usuario
                    showUserInterface();
                    
                    // Validar sesión con servidor en segundo plano
                    setTimeout(validateSessionWithServer, 1000);
                    
                    // Actualizar actividad
                    updateLastActivity();
                    
                } catch (error) {
                    console.error('❌ Error parseando datos de usuario:', error);
                    clearUserSession();
                    showLoginInterface();
                }
            } else {
                console.log('ℹ️ No hay sesión activa');
                showLoginInterface();
            }
            
            // Verificar si viene del login
            checkIfComingFromLogin();
        }
        
        // Funciones de almacenamiento mejoradas
        function getStorageItem(key) {
            return localStorage.getItem(key);
        }
        
        function setStorageItem(key, value) {
            localStorage.setItem(key, value);
        }
        
        function removeStorageItem(key) {
            localStorage.removeItem(key);
        }
        
        function saveTokens(accessToken, refreshToken) {
            setStorageItem(STORAGE_KEYS.TOKEN, accessToken);
            setStorageItem(STORAGE_KEYS.REFRESH_TOKEN, refreshToken);
        }
        
        function saveUserData(user) {
            setStorageItem(STORAGE_KEYS.USER, JSON.stringify(user));
        }
        
        // Sistema de expiración de sesión
        function isSessionExpired() {
            const expiresStr = getStorageItem(STORAGE_KEYS.SESSION_EXPIRES);
            if (!expiresStr) return true;
            
            try {
                const expires = new Date(expiresStr);
                const now = new Date();
                return now > expires;
            } catch (error) {
                console.error('Error verificando expiración:', error);
                return true;
            }
        }
        
        function updateSessionExpiration() {
            // Establecer expiración a 30 días desde ahora
            const expires = new Date();
            expires.setDate(expires.getDate() + 30);
            setStorageItem(STORAGE_KEYS.SESSION_EXPIRES, expires.toISOString());
        }
        
        function updateLastActivity() {
            const now = new Date().toISOString();
            setStorageItem(STORAGE_KEYS.LAST_ACTIVITY, now);
        }
        
        function startSessionMonitoring() {
            // Verificar cada minuto si la sesión está por expirar
            setInterval(() => {
                if (currentUser && !isSessionExpired()) {
                    // Si queda menos de 1 día, intentar refrescar preventivamente
                    const expiresStr = getStorageItem(STORAGE_KEYS.SESSION_EXPIRES);
                    if (expiresStr) {
                        const expires = new Date(expiresStr);
                        const now = new Date();
                        const hoursLeft = (expires - now) / (1000 * 60 * 60);
                        
                        if (hoursLeft < 24 && !isRefreshingToken) {
                            console.log('🔄 Sesión cerca de expirar, refrescando preventivamente...');
                            refreshTokens().then(() => {
                                console.log('✅ Refresco preventivo completado');
                            }).catch(error => {
                                console.error('❌ Error en refresco preventivo:', error);
                            });
                        }
                    }
                }
            }, 60 * 1000); // 1 minuto
        }
        
        async function validateSessionWithServer() {
            if (!currentUser) return;
            
            const token = getStorageItem(STORAGE_KEYS.TOKEN);
            if (!token) return;
            
            try {
                console.log('🔄 Validando sesión con servidor...');
                
                const response = await fetchWithAuth(`${API_BASE_URL}/auth/verify`);
                
                if (response.ok) {
                    const data = await response.json();
                    if (data.valid) {
                        console.log('✅ Sesión válida');
                        updateSessionExpiration();
                        updateLastActivity();
                    }
                }
            } catch (error) {
                console.error('⚠️ Error validando sesión:', error);
                // No limpiar sesión por error de red
            }
        }
        
        function showUserInterface() {
            const loginBtn = document.getElementById('login-btn');
            const loggedUser = document.getElementById('logged-user');
            const mobileUserMenu = document.getElementById('mobile-user-menu');
            
            if (loginBtn) loginBtn.style.display = 'none';
            if (loggedUser) loggedUser.style.display = 'flex';
            if (mobileUserMenu) mobileUserMenu.style.display = 'block';
            
            updateUserInfo();
            
            // Configurar avatar
            const avatar = document.getElementById('user-avatar');
            if (avatar && currentUser) {
                const letter = currentUser.nombre 
                    ? currentUser.nombre.charAt(0).toUpperCase() 
                    : currentUser.email.charAt(0).toUpperCase();
                
                avatar.textContent = letter;
                
                // Color según rol
                if (currentUser.rol === 'admin') {
                    avatar.style.background = 'linear-gradient(135deg, #e74c3c, #c0392b)';
                    avatar.title = `Administrador: ${currentUser.nombre}`;
                } else {
                    avatar.style.background = 'linear-gradient(135deg, #3498db, #2c3e50)';
                    avatar.title = `Usuario: ${currentUser.nombre}`;
                }
                
                // Eventos del avatar
                avatar.onclick = toggleUserDropdown;
                avatar.onkeydown = function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        toggleUserDropdown();
                    }
                };
            }
        }
        
        function showLoginInterface() {
            const loginBtn = document.getElementById('login-btn');
            const loggedUser = document.getElementById('logged-user');
            const mobileUserMenu = document.getElementById('mobile-user-menu');
            
            if (loginBtn) loginBtn.style.display = 'flex';
            if (loggedUser) loggedUser.style.display = 'none';
            if (mobileUserMenu) mobileUserMenu.style.display = 'none';
            
            // Cerrar dropdown si está abierto
            if (userDropdown && userDropdownOpen) {
                closeUserDropdown();
            }
        }
        
        function updateUserInfo() {
            if (!currentUser) return;
            
            const userName = document.getElementById('user-name');
            const userRole = document.getElementById('user-role');
            
            if (userName) {
                userName.textContent = currentUser.nombre || currentUser.email.split('@')[0];
            }
            
            if (userRole) {
                userRole.textContent = currentUser.rol || 'user';
                userRole.className = 'user-role ' + (currentUser.rol === 'admin' ? 'admin' : '');
            }
        }
        
        function toggleUserDropdown() {
            if (!currentUser) return;
            
            if (!userDropdown) {
                createUserDropdown();
            }
            
            if (userDropdownOpen) {
                closeUserDropdown();
            } else {
                openUserDropdown();
            }
        }
        
        function createUserDropdown() {
            // Remover dropdown existente
            const existing = document.getElementById('user-dropdown-menu');
            if (existing) existing.remove();
            
            // Crear nuevo dropdown
            userDropdown = document.createElement('div');
            userDropdown.id = 'user-dropdown-menu';
            userDropdown.className = 'user-dropdown-menu';
            
            const isAdmin = currentUser.rol === 'admin';
            
            userDropdown.innerHTML = `
                <div class="user-dropdown-header">
                    <div style="font-weight: bold; font-size: 16px;">${currentUser.nombre || 'Usuario'}</div>
                    <div class="user-dropdown-email">${currentUser.email}</div>
                    ${isAdmin ? '<div style="font-size: 12px; margin-top: 4px; padding: 2px 8px; background: rgba(255,255,255,0.2); border-radius: 4px; display: inline-block;">Administrador</div>' : ''}
                </div>
                <a href="usuario.html" class="user-dropdown-link" id="user-account-link">
                    <i class="bi bi-person"></i> Mi Cuenta
                    ${isAdmin ? '<span class="admin-badge">ADMIN</span>' : ''}
                </a>
                ${isAdmin ? `
                <a href="admin.html" class="user-dropdown-link">
                    <i class="bi bi-shield-check"></i> Panel de Administración
                </a>
                ` : ''}
                <a href="reservas.html" class="user-dropdown-link">
                    <i class="bi bi-calendar-check"></i> Mis Reservas
                </a>
                <a href="#" class="user-dropdown-link" id="logout-link">
                    <i class="bi bi-box-arrow-right"></i> Cerrar Sesión
                </a>
            `;
            
            // Añadir al DOM
            document.getElementById('user-menu-container').appendChild(userDropdown);
            
            // Configurar eventos de los enlaces
            const accountLink = document.getElementById('user-account-link');
            if (accountLink) {
                accountLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    // Guardar en sessionStorage que vamos a usuario.html
                    sessionStorage.setItem('redirecting_to_user', 'true');
                    window.location.href = 'usuario.html';
                });
            }
            
            const logoutLink = document.getElementById('logout-link');
            if (logoutLink) {
                logoutLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    logout();
                });
            }
            
            // Estilos hover
            const links = userDropdown.querySelectorAll('.user-dropdown-link');
            links.forEach(link => {
                link.addEventListener('mouseenter', function() {
                    this.style.background = '#f5f5f5';
                });
                link.addEventListener('mouseleave', function() {
                    this.style.background = '';
                });
            });
        }
        
        function openUserDropdown() {
            if (!userDropdown) return;
            
            userDropdown.classList.add('show');
            userDropdownOpen = true;
            
            // Configurar cierre al hacer clic fuera
            setTimeout(() => {
                document.addEventListener('click', closeUserDropdownOnClickOutside);
                document.addEventListener('keydown', closeUserDropdownOnEscape);
            }, 10);
        }
        
        function closeUserDropdown() {
            if (userDropdown) {
                userDropdown.classList.remove('show');
                userDropdownOpen = false;
                
                // Remover event listeners
                document.removeEventListener('click', closeUserDropdownOnClickOutside);
                document.removeEventListener('keydown', closeUserDropdownOnEscape);
            }
        }
        
        function closeUserDropdownOnClickOutside(e) {
            if (userDropdown && 
                !userDropdown.contains(e.target) && 
                !document.getElementById('user-avatar').contains(e.target)) {
                closeUserDropdown();
            }
        }
        
        function closeUserDropdownOnEscape(e) {
            if (e.key === 'Escape' && userDropdownOpen) {
                closeUserDropdown();
            }
        }
        
        function logout() {
            if (confirm('¿Estás seguro de cerrar sesión?')) {
                clearUserSession();
                showLoginInterface();
                showAlert('Sesión cerrada correctamente', 'success');
                
                // Redirigir si está en página protegida
                const currentPath = window.location.pathname;
                if (currentPath.includes('usuario.html') || 
                    currentPath.includes('admin.html') ||
                    currentPath.includes('reservas.html')) {
                    setTimeout(() => {
                        window.location.href = '../index.html';
                    }, 1000);
                }
            }
        }
        
        function clearUserSession() {
            // Limpiar todos los almacenamientos
            Object.values(STORAGE_KEYS).forEach(key => {
                localStorage.removeItem(key);
                sessionStorage.removeItem(key);
            });
            
            currentUser = null;
            console.log('✅ Sesión completamente limpiada');
        }
        
        function checkIfComingFromLogin() {
            const urlParams = new URLSearchParams(window.location.search);
            const fromLogin = urlParams.get('fromLogin');
            const loginSuccess = urlParams.get('loginSuccess');
            
            if (fromLogin === 'true' || loginSuccess === 'true') {
                console.log('🔑 Usuario viene del login');
                
                // Limpiar URL
                const cleanUrl = window.location.pathname;
                window.history.replaceState({}, document.title, cleanUrl);
                
                // Mostrar mensaje de bienvenida
                if (currentUser) {
                    setTimeout(() => {
                        showAlert(`¡Bienvenido/a ${currentUser.nombre}! Has iniciado sesión correctamente.`, 'success');
                    }, 500);
                }
            }
        }
        
        // ========== FUNCIONES DE UI ==========
        
        function hideLoader() {
            const loader = document.getElementById('page-loader');
            if (loader) {
                loader.classList.add('hidden');
                document.body.classList.remove('loading');
                document.body.style.overflow = 'visible';
            }
        }
        
        function showContentGradually() {
            // Fade in del contenido principal
            const content = document.querySelector('.page-content');
            if (content) {
                content.style.opacity = '0';
                content.style.transition = 'opacity 0.5s ease';
                setTimeout(() => {
                    content.style.opacity = '1';
                }, 100);
            }
            
            // Animaciones para elementos al hacer scroll
            if ('IntersectionObserver' in window) {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('animated');
                        }
                    });
                }, { threshold: 0.1 });
                
                // Observar todas las secciones
                document.querySelectorAll('.content-block').forEach(section => {
                    observer.observe(section);
                });
            }
        }
        
        function showAlert(message, type = 'info') {
            let alertDiv = document.getElementById('site-alert');
            if (!alertDiv) {
                alertDiv = document.createElement('div');
                alertDiv.id = 'site-alert';
                alertDiv.className = 'site-alert';
                document.body.appendChild(alertDiv);
            }
            
            alertDiv.textContent = message;
            alertDiv.className = `site-alert ${type}`;
            alertDiv.style.display = 'block';
            
            setTimeout(() => {
                alertDiv.style.display = 'none';
            }, 4000);
        }
        
        // ========== EVENTOS ==========
        
        function initializeEvents() {
            console.log('🎮 Configurando eventos...');
            
            // Menú móvil
            setupMobileMenu();
            
            // Header scroll effect
            setupHeaderScroll();
            
            // Smooth scroll para enlaces internos
            setupSmoothScroll();
            
            // Botones con efectos táctiles
            setupTouchButtons();
            
            console.log('✅ Eventos configurados');
        }
        
        function setupMobileMenu() {
            const menuToggle = document.getElementById('mobile-menu-toggle');
            const menuClose = document.getElementById('mobile-menu-close');
            const menuOverlay = document.getElementById('mobile-menu-overlay');
            const menuContainer = document.getElementById('mobile-menu-container');
            
            if (menuToggle) {
                menuToggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    if (!isMobileMenuOpen) {
                        openMobileMenu();
                    } else {
                        closeMobileMenu();
                    }
                });
                
                menuToggle.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    if (!isMobileMenuOpen) {
                        openMobileMenu();
                    } else {
                        closeMobileMenu();
                    }
                }, { passive: false });
            }
            
            if (menuClose) {
                menuClose.addEventListener('click', closeMobileMenu);
                menuClose.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    closeMobileMenu();
                }, { passive: false });
            }
            
            if (menuOverlay) {
                menuOverlay.addEventListener('click', closeMobileMenu);
                menuOverlay.addEventListener('touchstart', function(e) {
                    if (e.target === menuOverlay) {
                        e.preventDefault();
                        closeMobileMenu();
                    }
                }, { passive: false });
            }
            
            // Cerrar menú al hacer clic en enlaces
            const mobileLinks = document.querySelectorAll('.mobile-menu-nav a');
            mobileLinks.forEach(link => {
                link.addEventListener('click', closeMobileMenu);
                link.addEventListener('touchstart', function(e) {
                    setTimeout(closeMobileMenu, 100);
                }, { passive: true });
            });
            
            // Cerrar con Escape
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && isMobileMenuOpen) {
                    closeMobileMenu();
                }
            });
            
            // Prevenir scroll cuando el menú está abierto
            menuContainer.addEventListener('touchmove', function(e) {
                if (isMobileMenuOpen) {
                    e.preventDefault();
                }
            }, { passive: false });
        }
        
        function openMobileMenu() {
            const menuContainer = document.getElementById('mobile-menu-container');
            const menuOverlay = document.getElementById('mobile-menu-overlay');
            
            if (menuContainer && menuOverlay) {
                menuContainer.classList.add('active');
                menuOverlay.classList.add('active');
                document.body.style.overflow = 'hidden';
                isMobileMenuOpen = true;
                
                // Cerrar dropdown de usuario si está abierto
                closeUserDropdown();
                
                // Actualizar aria-expanded
                const menuToggle = document.getElementById('mobile-menu-toggle');
                if (menuToggle) {
                    menuToggle.setAttribute('aria-expanded', 'true');
                    menuToggle.innerHTML = '<i class="bi bi-x-lg"></i>';
                }
            }
        }
        
        function closeMobileMenu() {
            const menuContainer = document.getElementById('mobile-menu-container');
            const menuOverlay = document.getElementById('mobile-menu-overlay');
            
            if (menuContainer && menuOverlay) {
                menuContainer.classList.remove('active');
                menuOverlay.classList.remove('active');
                document.body.style.overflow = '';
                isMobileMenuOpen = false;
                
                // Actualizar aria-expanded
                const menuToggle = document.getElementById('mobile-menu-toggle');
                if (menuToggle) {
                    menuToggle.setAttribute('aria-expanded', 'false');
                    menuToggle.innerHTML = '<i class="bi bi-list"></i>';
                }
            }
        }
        
        function setupHeaderScroll() {
            let ticking = false;
            window.addEventListener('scroll', function() {
                if (!ticking) {
                    window.requestAnimationFrame(function() {
                        const header = document.querySelector('header');
                        if (window.scrollY > 50) {
                            header.style.boxShadow = '0 4px 20px rgba(0,0,0,0.15)';
                        } else {
                            header.style.boxShadow = '0 2px 10px rgba(0,0,0,0.1)';
                        }
                        ticking = false;
                    });
                    ticking = true;
                }
            });
        }
        
        function setupSmoothScroll() {
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    const href = this.getAttribute('href');
                    if (href === '#') return;
                    
                    const target = document.querySelector(href);
                    if (target) {
                        e.preventDefault();
                        window.scrollTo({
                            top: target.offsetTop - 80,
                            behavior: 'smooth'
                        });
                    }
                });
            });
        }
        
        function setupTouchButtons() {
            const allButtons = document.querySelectorAll('button, .btn, .login-btn, .social-icon');
            allButtons.forEach(button => {
                button.style.cursor = 'pointer';
                button.style.webkitTapHighlightColor = 'rgba(0,0,0,0.1)';
                
                button.addEventListener('touchstart', function() {
                    this.style.transform = 'scale(0.98)';
                }, { passive: true });
                
                button.addEventListener('touchend', function() {
                    this.style.transform = '';
                }, { passive: true });
            });
        }
        
        // ========== EXPORTAR FUNCIONES GLOBALES ==========
        window.CanoSalaoAuth = {
            currentUser: () => currentUser,
            logout: logout,
            showAlert: showAlert,
            fetchWithAuth: fetchWithAuth,
            refreshTokens: refreshTokens,
            clearUserSession: clearUserSession
        };
        
        console.log('✅ Página de Empresa completamente cargada con sesiones persistentes');
    </script>
</body>
</html>


